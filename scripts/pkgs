#!/usr/bin/env node

const Table = require("easy-table");
const OrderRepo = require("./packages/order-repo");
const Tracker = require("./packages/tracker");

function listOrders() {
  const table = new Table();
  const orders = OrderRepo.load();
  orders.forEach(order => order.addToTable(table));

  console.info(`\nExpecting ${orders.length} orders:\n`);
  console.info(table.toString());
}

const command = process.argv[2];
switch (command) {
  case "l":
  case "list":
    listOrders();
    break;

  case "t":
  case "track":
    new Tracker().track(OrderRepo.load());
    break;

  case "s":
  case "server":
    require("./packages/server");
    break;
}
